/*!
 * uform
 * https://github.com/yqfang/UForm#readme
 * yqfang,qianzhixiang
 * Version: 1.0.0 - 2016-07-11T03:19:04.252Z
 * License: ISC
 */
!function(){"use strict";var e=angular.module("up.uform",["ui.bootstrap"]);e.config(["$provide","datepickerConfig",function(e,t){t.showWeeks=!1,e.decorator("ngModelDirective",["$delegate",function(e){var t=e[0],n=t.controller;return t.controller=["$scope","$element","$attrs","$injector",function(e,t,i,r){var a=r.get("$interpolate");i.$set("name",a(i.name||"")(e)),i.$set("validator",a(i.validator||"")(e)),r.invoke(n,this,{$scope:e,$element:t,$attrs:i})}],e}]),angular.forEach({"ng-form":"ngFormDirective",form:"formDirective"},function(t){e.decorator(t,["$delegate",function(e){var t=e[0],n=t.controller;return t.controller=["$scope","$element","$attrs","$injector",function(e,t,i,r){var a=r.get("$interpolate");i.$set("name",a(i.name||i.ngForm||"")(e)),i.$set("angular-validator",""),r.invoke(n,this,{$scope:e,$element:t,$attrs:i})}],e}])})}]),e.directive("compileField",["$compile",function(e){return{restrict:"A",controller:["$scope",function(e){this.field=e.$parent.$eval("field"),this.form={}}],require:"?^uForm",controllerAs:"$proxy",scope:{},link:function(t,n,i,r){angular.extend(t.$proxy.form,r),n.html("<div "+t.$parent.$eval(i.compileField)+" />"),e(n.contents())(t)}}}]),e.directive("ufieldDisabled",["$parse",function(e){return{require:"?^uForm",restrict:"A",link:function(t,n,i,r){t.$watch(function(){var t=e(i.ufieldDisabled)(r.result);return t},function(e){n[0].disabled=e})}}}]),e.directive("ufieldHide",["$parse",function(e){return{require:"?^uForm",restrict:"A",link:function(t,n,i,r){"hide"in t.field&&t.$watch(function(){var t=e(i.ufieldHide)(r.result);return t},function(e){n.css("display",e?"none":""),e&&delete r.result[t.field.name]})}}}]),e.directive("uForm",["$rootScope",function(e){return{templateUrl:"form.html",transclude:!0,restrict:"EA",controller:["$scope","$attrs","$rootScope","ufield",function(e,t,n,i){var r=e.$parent;this.fields=r.$eval(t.fields),angular.forEach(this.fields,function(e){angular.extend(e,i.create(e))}),this.option=r.$eval(t.option),this.result=r.$eval(t.result)||r.$eval(t.result+"={}")}],scope:{},controllerAs:"uform",require:"?^uFormGroup",link:function(e,t,n,i){e.uform.$form=e.$parent.$eval(n.name),i&&i.fields&&i.fields.push(e.uform.fields),i&&i.result&&i.result.push(e.uform.result)}}}]),e.directive("uFormGroup",function(){return{controller:["$scope","$attrs",function(e,t){this.fields=e.$parent.$eval(t.fields)||e.$parent.$eval(t.fields+"=[]"),this.result=e.$parent.$eval(t.result)||e.$parent.$eval(t.result+"=[]")}],scope:{},template:"<div ng-transclude></div>",controllerAs:"uFormGroup",transclude:!0}}),angular.forEach({upDate:"up-date",upTime:"up-time",upDatetime:"up-datetime",upPassword:"up-password",upCheckbox:"up-checkbox",upRadio:"up-radio",upSubmit:"up-submit",upSelect:"up-select",upTextarea:"up-textarea"},function(t,n){e.directive(n,["$compile","uFormUtil",function(e,n){return{restrict:"EA",controller:["$scope",function(e){angular.extend(this,e.$proxy)}],controllerAs:"vm",link:function(i,r,a){n.getTemplate(t).then(function(t){r.html(t.replace(/ng-model/g,n.toAttrs(i.vm.field.customs)+"ng-model")),e(r.contents())(i)})}}}])}),e.directive("upText",["$compile","uFormUtil",function(e,t){return{restrict:"EA",controller:["$scope",function(e){angular.extend(this,e.$proxy)}],controllerAs:"vm",link:function(n,i,r){t.getTemplate("up-text").then(function(r){i.html(r.replace(/ng-model/g,t.toAttrs(n.vm.field.customs)+"ng-model")),e(i.contents())(n)})}}}]),e.provider("ufield",[function(){var e="up-text",t="dirty",n=/^.*$/,i=function(i){var r={};return i=i||{},r.type=angular.isDefined(i.type)?i.type:e,r.validateOn=!angular.isDefined(i.validateOn)||"dirty"!==i.validateOn&&"blur"!==i.validateOn?t:i.validateOn,r.pattern=angular.isDefined(i.pattern)?i.pattern:n,r};this.useType=function(t){angular.isDefined(t)&&(e=t)},this.useValidateOn=function(e){angular.isDefined(e)&&(t=e)},this.usePattern=function(e){angular.isDefined(e)&&(n=e)},this.$get=[function(){return{create:function(e){return e=i(e)}}}]}]),e.filter("orderById",function(){return function(e,t,n){var i=[];return angular.forEach(e,function(e,t){e.name=t,i.push(e)}),i.sort(function(e,n){return e[t]>n[t]?1:-1}),n&&i.reverse(),i}}),e.factory("uFormUtil",["$templateCache","$q","$http","dialogs",function(e,t,n,i){function r(e){if(!e)return"";var t="";for(var n in e){var i;i=e[n]?n+"="+e[n]:n,t+=i+" "}return t}function a(r){var a=r+".html",l=e.get(a);return l?t.when(l):n.get(a,{cache:!0}).then(function(t){return e.put(a,t),t.data},function(e){i.error("模板错误!","通过："+a+" 找不到模板")})}return{toAttrs:r,getTemplate:a}}]),e.directive("capitalize",function(){return{require:"ngModel",link:function(e,t,n,i){var r=function(e){void 0==e&&(e="");var t=e.toUpperCase();return t!==e&&(i.$setViewValue(t),i.$render()),t};i.$parsers.push(r),r(e[n.ngModel])}}}),e.directive("truncateTo",["$parse",function(e){return{require:"ngModel",restrict:"A",link:function(e,t,n,i){var r=function(e){var t=parseInt(n.truncateTo);void 0==e&&(e="");var r=e.substring(0,t);return r!==e&&(i.$setViewValue(r),i.$render()),r};i.$parsers.push(r),r(e[n.ngModel])}}}]),e.directive("angularValidator",["$injector","$parse",function(e,t){return{restrict:"A",link:function(n,i,r,a){function l(t){return!!(t&&"invalid-message"in t.attributes)&&e.get(t.attributes["invalid-message"].value)}function o(e){for(var t=l(e),n=0;n<e.length;n++)n in e&&u(e[n],t)}function u(e,t){"validate-on"in e.attributes&&"blur"===e.attributes["validate-on"].value&&angular.element(e).on("blur",function(){f(e,t),p(e)});var i=n.$watch(function(){return e.value+e.required+b.submitted+s(e)+d(b[e.name])+m(b[e.name])},function(){if(b.submitted)f(e,t),p(e);else{var n="validate-on"in e.attributes&&"dirty"===e.attributes["validate-on"].value;n?(f(e,t),p(e)):b[e.name]&&b[e.name].$pristine&&(f(e,t),p(e))}});h.push(i)}function d(e){if(e&&"$dirty"in e)return e.$dirty}function m(e){if(e&&"$valid"in e)return e.$valid}function s(e){if("validator"in e.attributes){var t;return t=!e.attributes.validator||""===e.attributes.validator.value||1==n.$eval(e.attributes.validator.value),!b[e.name]||(b[e.name].$setValidity("angularValidator",t),t)}}function f(e,t){var i=function(){return"<i class='fa fa-times'></i> Required"},r=function(){return"<i class='fa fa-times'></i> Invalid"};if(e.name in b){var a=b[e.name],l=v(e);l&&l.remove(),(a.$dirty||n[e.form.name]&&n[e.form.name].submitted)&&(a.$error.required?"required-message"in e.attributes?angular.element(e).after(c(e.attributes["required-message"].value)):angular.element(e).after(c(i)):a.$valid||("invalid-message"in e.attributes?angular.element(e).after(c(e.attributes["invalid-message"].value)):t?angular.element(e).after(c(t.message(a,e))):angular.element(e).after(c(r))))}}function c(e){return"<label class='control-label has-error validationMessage'>"+n.$eval(e)+"</label>"}function v(e){for(var t=angular.element(e).parent().children(),n=0;n<t.length;n++)if(angular.element(t[n]).hasClass("validationMessage"))return angular.element(t[n]);return!1}function p(e){if(e.name in b){var t=b[e.name];angular.element(e).removeClass("has-error"),angular.element(e.parentNode).removeClass("has-error"),(t.$dirty||n[e.form.name]&&n[e.form.name].submitted)&&t.$invalid&&(angular.element(e.parentNode).addClass("has-error"),angular.element(e).addClass("has-error"))}}var g=angular.element(i)[0],h=[],$=g.attributes.name.value,b=t($)(n);b.submitted=!1,n.$watch(function(){return Object.keys(b).length},function(){angular.forEach(h,function(e){e()}),o(g)}),i.on("submit",function(e){e.preventDefault(),n.$apply(function(){b.submitted=!0}),b.$valid&&n.$apply(function(){n.$eval(g.attributes["angular-validator-submit"].value)})}),b.reset=function(){for(var e=0;e<g.length;e++)g[e].name&&(b[g[e].name].$setViewValue(""),b[g[e].name].$render());b.submitted=!1,b.$setPristine()},o(g)}}}])}(),angular.module("up.uform").run(["$templateCache",function(e){e.put("form.html",'<div><style type=text/css>\n\t\t.form-inline .inline-control {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t\t.form-inline .datepicker {\n\t\t\twidth: 120px;\n\t\t}\n\t\t.form-inline input[type=\'text\'] {\n\t\t\twidth: 120px;\n\t\t}\n\t\t.form-inline .form-group {\n\t\t    display: inline-block;\n\t\t    margin-bottom: 0;\n\t\t    vertical-align: middle;\n\t\t    margin-right: 10px;\n\t\t}\n\t\t.form-horizontal .control-label {\n\t\t\ttext-align: right;\n\t\t}\n\t\t.control-datepicker {\n\t\t\tpadding-left: 0;\n\t\t}\n\t\t.timepicker tr.text-center {\n\t\t\tdisplay: none;\n\t\t}\n\t</style><div class=form-group ufield-hide={{field.hide}} ng-class=field.name ng-repeat="field in (uform.fields | orderById: \'id\')"><label for={{field.name}} ng-class=uform.option.labelClass class=control-label><span ng-show="field.required && field.label">*</span> <span ng-if="field.type!=\'up-checkbox\'">{{ field.label }}</span></label><div compile-field=field.type ng-class=uform.option.inputClass></div></div><div ng-transclude=""></div></div>'),e.put("up-checkbox.html","<div class=checkbox><label><input type=checkbox name={{vm.field.name}} ng-model=vm.form.result[vm.field.name]> {{ vm.field.label }}</label></div>"),e.put("up-date.html",'<div><input type=text name={{vm.field.name}} class="form-control datepicker" datepicker-popup=yyyy-MM-dd ng-model=vm.form.result[vm.field.name] ng-init="vm.form.open=false" is-open=vm.form.open ng-style=vm.field.style show-button-bar=false ng-click="vm.form.open=!vm.form.open"></div>'),e.put("up-datetime.html",'<div><div class="col-xs-6 control-datepicker"><input type=text name={{vm.field.name}} class="form-control datepicker" datepicker-popup=yyyy-MM-dd ng-model=vm.form.result[vm.field.name] ng-init="vm.form.open=false" is-open=vm.form.open show-button-bar=false ng-click="vm.form.open=!vm.form.open"></div><div><div class=timepicker timepicker="" ng-model=vm.form.result[vm.field.name]></div></div></div>'),e.put("up-password.html","<input type=password id={{vm.field.name}} name={{vm.field.name}} ng-model=vm.form.result[vm.field.name] ng-required=vm.field.required required-message=\"'{{vm.field.requiredMsg}}'\" ng-maxlength={{vm.field.maxlength}} ng-minlength={{vm.field.minlength}} ng-pattern=vm.field.pattern validate-on={{vm.field.validateOn}} validator={{vm.field.validator}} invalid-message={{vm.field.validator}} class=form-control ufield-disabled={{vm.field.disabled}} ng-attr-placeholder={{vm.field.placeholder}} ng-style=vm.field.style>"),e.put("up-radio.html",'<div><div class=radio-inline ng-repeat="candidate in vm.field.candidates"><label><input type=radio ng-init="vm.form.result[vm.field.name]=vm.field.candidates[0].value" ng-model=vm.form.result[vm.field.name] name={{vm.field.name}} value={{candidate.value}} ng-required=vm.field.required>{{candidate.label}}</label></div></div>'),e.put("up-select.html",'<select ng-init="vm.form.result[vm.field.name]=vm.field.candidates[0].value" class=form-control ng-model=vm.form.result[vm.field.name] name={{vm.field.name}} ng-options="option.value as option.name for option in vm.field.candidates" ng-required=vm.field.required></select>'),e.put("up-submit.html",'<input class="btn btn-primary" type=submit value={{vm.field.value}}>'),e.put("up-text.html","<input type=text id={{vm.field.name}} name={{vm.field.name}} ng-model=vm.form.result[vm.field.name] ng-required=vm.field.required required-message=\"'{{vm.field.requiredMsg}}'\" ng-maxlength={{vm.field.maxlength}} ng-minlength={{vm.field.minlength}} ng-pattern=vm.field.pattern validate-on={{vm.field.validateOn}} validator={{vm.field.validator}} invalid-message={{vm.field.validator}} class=form-control ufield-disabled={{vm.field.disabled}} ng-attr-placeholder={{vm.field.placeholder}} ng-style=vm.field.style ng-change=\"$emit('change', { field: vm.field })\" ng-blur=\"$emit('blur', { field: vm.field })\">"),e.put("up-textarea.html","<textarea id={{vm.field.name}} name={{vm.field.name}} ng-model=vm.form.result[vm.field.name] ng-required=vm.field.required required-message=\"'{{vm.field.requiredMsg}}'\" ng-maxlength={{vm.field.maxlength}} ng-minlength={{vm.field.minlength}} ng-pattern=vm.field.pattern validate-on={{vm.field.validateOn}} validator={{vm.field.validator}} invalid-message={{vm.field.validator}} class=form-control ufield-disabled={{vm.field.disabled}} ng-attr-placeholder={{vm.field.placeholder}} ng-style=vm.field.style>\n</textarea>"),e.put("up-time.html",'<div><div class=timepicker timepicker="" ng-model=vm.form.result[vm.field.name]></div></div>')}]);
//# sourceMappingURL=uform.min.js.map
