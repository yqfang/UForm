/*!
 * uform
 * https://github.com/yqfang/UForm#readme
 * yqfang,qianzhixiang
 * Version: 1.0.0 - 2016-07-04T11:44:21.047Z
 * License: ISC
 */
!function(){"use strict";var e=angular.module("up.uform",["ui.bootstrap"]);e.config(["$provide","datepickerConfig",function(e,t){t.showWeeks=!1,e.decorator("ngModelDirective",["$delegate",function(e){var t=e[0],n=t.controller;return t.controller=["$scope","$element","$attrs","$injector",function(e,t,r,a){var i=a.get("$interpolate");r.$set("name",i(r.name||"")(e)),r.$set("validator",i(r.validator||"")(e)),a.invoke(n,this,{$scope:e,$element:t,$attrs:r})}],e}]),angular.forEach({"ng-form":"ngFormDirective",form:"formDirective"},function(t){e.decorator(t,["$delegate",function(e){var t=e[0],n=t.controller;return t.controller=["$scope","$element","$attrs","$injector",function(e,t,r,a){var i=a.get("$interpolate");r.$set("name",i(r.name||r.ngForm||"")(e)),r.$set("angular-validator",""),a.invoke(n,this,{$scope:e,$element:t,$attrs:r})}],e}])})}]),e.directive("angularValidator",["$injector","$parse",function(e,t){return{restrict:"A",link:function(n,r,a,i){function u(t){return!!(t&&"invalid-message"in t.attributes)&&e.get(t.attributes["invalid-message"].value)}function o(e){for(var t=u(e),n=0;n<e.length;n++)n in e&&l(e[n],t)}function l(e,t){"validate-on"in e.attributes&&"blur"===e.attributes["validate-on"].value&&angular.element(e).on("blur",function(){f(e,t),v(e)});var r=n.$watch(function(){return e.value+e.required+b.submitted+d(e)+s(b[e.name])+c(b[e.name])},function(){if(b.submitted)f(e,t),v(e);else{var n="validate-on"in e.attributes&&"dirty"===e.attributes["validate-on"].value;n?(f(e,t),v(e)):b[e.name]&&b[e.name].$pristine&&(f(e,t),v(e))}});g.push(r)}function s(e){if(e&&"$dirty"in e)return e.$dirty}function c(e){if(e&&"$valid"in e)return e.$valid}function d(e){if("validator"in e.attributes){var t;return t=!e.attributes.validator||""===e.attributes.validator.value||n.$eval(e.attributes.validator.value+=" === true"),!b[e.name]||(b[e.name].$setValidity("angularValidator",t),t)}}function f(e,t){var r=function(){return"<i class='fa fa-times'></i> Required"},a=function(){return"<i class='fa fa-times'></i> Invalid"};if(e.name in b){var i=b[e.name],u=p(e);u&&u.remove(),(i.$dirty||n[e.form.name]&&n[e.form.name].submitted)&&(i.$error.required?"required-message"in e.attributes?angular.element(e).after(m(e.attributes["required-message"].value)):angular.element(e).after(m(r)):i.$valid||("invalid-message"in e.attributes?angular.element(e).after(m(e.attributes["invalid-message"].value)):t?angular.element(e).after(m(t.message(i,e))):angular.element(e).after(m(a))))}}function m(e){return"<label class='control-label has-error validationMessage'>"+n.$eval(e)+"</label>"}function p(e){for(var t=angular.element(e).parent().children(),n=0;n<t.length;n++)if(angular.element(t[n]).hasClass("validationMessage"))return angular.element(t[n]);return!1}function v(e){if(e.name in b){var t=b[e.name];angular.element(e).removeClass("has-error"),angular.element(e.parentNode).removeClass("has-error"),(t.$dirty||n[e.form.name]&&n[e.form.name].submitted)&&t.$invalid&&(angular.element(e.parentNode).addClass("has-error"),angular.element(e).addClass("has-error"))}}var $=angular.element(r)[0],g=[],h=$.attributes.name.value,b=t(h)(n);b.submitted=!1,n.$watch(function(){return Object.keys(b).length},function(){angular.forEach(g,function(e){e()}),o($)}),r.on("submit",function(e){e.preventDefault(),n.$apply(function(){b.submitted=!0}),b.$valid&&n.$apply(function(){n.$eval($.attributes["angular-validator-submit"].value)})}),b.reset=function(){for(var e=0;e<$.length;e++)$[e].name&&(b[$[e].name].$setViewValue(""),b[$[e].name].$render());b.submitted=!1,b.$setPristine()},o($)}}}]),e.directive("bindDirectiveCompile",["$compile",function(e){return{restrict:"A",link:function(t,n,r){var a=t.$watch(function(){return t.$eval(r.bindDirectiveCompile)},function(i){i="<div "+i+" />",n.html(i&&i.toString());var u=t;r.bindDirectiveScope&&(u=t.$eval(r.bindDirectiveScope)),e(n.contents())(u),a()})}}}]),angular.forEach({"input-text":"appInputTextComponent","input-date":"appInputDateComponent","input-time":"appInputTimeComponent","input-datetime":"appInputDatetimeComponent","input-password":"appInputPasswordComponent","input-checkbox":"appInputCheckboxComponent","input-radio":"appInputRadioComponent","input-submit":"appInputSubmitComponent",select:"appSelectComponent",textarea:"appTextareaComponent"},function(t,n){e.directive(t,function(){return{restrict:"EA",controller:["$scope","$attrs",function(e,t){var n=e.$parent;this.field=n.$eval("field"),this.ref=e}],controllerAs:"componentCtrl",templateUrl:n+".html",scope:{model:"="},replace:!0,require:["?^uForm"],link:function(e,t,n,r){}}})}),e.filter("orderById",function(){return function(e,t,n){var r=[];return angular.forEach(e,function(e,t){e.name=t,r.push(e)}),r.sort(function(e,n){return e[t]>n[t]?1:-1}),n&&r.reverse(),r}}),e.provider("ufield",[function(){var e="input",t="dirty",n=function(n){var r={};return n=n||{},r.type=angular.isDefined(n.type)?n.type:e,r.validateOn=!angular.isDefined(n.validateOn)||"dirty"!==n.validateOn&&"blur"!==n.validateOn?t:n.validateOn,r};this.useType=function(t){angular.isDefined(t)&&(e=t)},this.useValidateOn=function(e){angular.isDefined(e)&&(t=e)},this.$get=[function(){return{create:function(e){return e=n(e)}}}]}]),e.directive("upFieldHide",["$parse",function(e){return{require:"?^uForm",restrict:"A",link:function(t,n,r,a){"hide"in t.field&&t.$watch(function(){var t=e(r.upFieldHide)(a.result);return t},function(e){n.css("display",e?"none":""),e&&delete a.result[t.field.name]})}}}]),e.directive("uForm",["$rootScope",function(e){return{templateUrl:"form.html",transclude:!0,restrict:"EA",controller:["$scope","$attrs","$rootScope","ufield",function(e,t,n,r){var a=e.$parent;this.fields=a.$eval(t.fields),angular.forEach(this.fields,function(e){angular.extend(e,r.create(e))}),this.option=a.$eval(t.option),this.result=a.$eval(t.result)||a.$eval(t.result+"={}"),this.ref=e}],scope:{},controllerAs:"form",require:["?^uFormGroup"],link:function(e,t,n,r){var a=r[0];a&&a.fields&&a.fields.push(e.form.fields),a&&a.result&&a.result.push(e.form.result)}}}]),e.directive("uFormGroup",function(){return{controller:["$scope","$attrs",function(e,t){this.fields=e.$parent.$eval(t.fields)||e.$parent.$eval(t.fields+"=[]"),this.result=e.$parent.$eval(t.result)||e.$parent.$eval(t.result+"=[]")}],scope:{},template:"<div ng-transclude></div>",controllerAs:"uFormGroup",transclude:!0}})}();
//# sourceMappingURL=uform.min.js.map
