{"version":3,"sources":["uform.js","uform_without_templates.js","templates.js"],"names":["uf","angular","module","config","$provide","datepickerConfig","showWeeks","decorator","$delegate","ngModel","controller","scope","element","attrs","$injector","$interpolate","get","$set","name","validator","invoke","this","$scope","$element","$attrs","forEach","ng-form","form","directive","ngForm","$parse","restrict","link","fn","hasFormInvalidMessage","formElement","attributes","value","setupWatches","formInvalidMessage","i","length","setupWatch","elementToWatch","on","updateValidationMessage","updateValidationClass","watch","$watch","required","scopeForm","submitted","checkElementValidity","getDirtyValue","getValidValue","isDirtyElement","$pristine","watches","push","$dirty","$valid","isElementValid","$eval","$setValidity","defaultRequiredMessage","defaultInvalidMessage","scopeElementModel","validationMessageElement","isValidationMessagePresent","remove","$error","after","generateErrorMessage","message","messageText","elementSiblings","parent","children","hasClass","formField","removeClass","parentNode","$invalid","addClass","DOMForm","form_name","Object","keys","event","preventDefault","$apply","reset","$setViewValue","$render","$setPristine","$compile","field","$parent","require","controllerAs","extend","custom","listener","customField","html","toString","compileScope","contents","input-text","input-date","input-time","input-datetime","input-password","input-checkbox","input-radio","input-submit","select","textarea","directiveSelector","tpl","directiveScope","ref","templateUrl","model","replace","elem","attr","filter","items","reverse","filtered","item","sort","a","b","provider","_tp","_vo","_setOpts","opts","_opts","type","isDefined","validateOn","useType","val","useValidateOn","$get","create","res","upFieldHide","result","css","$rootScope","transclude","ufield","fields","option","group","template","run","$templateCache","put"],"mappings":"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","file":"uform.min.js","sourcesContent":["/*!\n * uform\n * https://github.com/yqfang/UForm#readme\n * yqfang,qianzhixiang\n * Version: 1.0.0 - 2016-07-05T08:36:25.390Z\n * License: ISC\n */\n\n\n(function() { \n\"use strict\";\nvar uf = angular.module('up.uform', ['ui.bootstrap']);\n\nuf.config([\"$provide\", \"datepickerConfig\", function ($provide, datepickerConfig) {\n    datepickerConfig.showWeeks = false;\n    $provide.decorator('ngModelDirective', [\"$delegate\", function ($delegate) {\n        var ngModel = $delegate[0], controller = ngModel.controller;\n        ngModel.controller = ['$scope', '$element', '$attrs', '$injector', function (scope, element, attrs, $injector) {\n            var $interpolate = $injector.get('$interpolate');\n            attrs.$set('name', $interpolate(attrs.name || '')(scope));\n            attrs.$set('validator', $interpolate(attrs.validator || '')(scope));\n            $injector.invoke(controller, this, {\n                '$scope': scope,\n                '$element': element,\n                '$attrs': attrs\n            });\n        }];\n        return $delegate;\n    }]);\n\n    angular.forEach({ 'ng-form': 'ngFormDirective', 'form': 'formDirective' }, function (directive) {\n        $provide.decorator(directive, [\"$delegate\", function ($delegate) {\n            var form = $delegate[0], controller = form.controller;\n            form.controller = ['$scope', '$element', '$attrs', '$injector', function (scope, element, attrs, $injector) {\n                var $interpolate = $injector.get('$interpolate');\n                attrs.$set('name', $interpolate(attrs.name || attrs.ngForm || '')(scope));\n                attrs.$set('angular-validator', \"\");\n                $injector.invoke(controller, this, {\n                    '$scope': scope,\n                    '$element': element,\n                    '$attrs': attrs\n                });\n            }];\n            return $delegate;\n        }]);\n    })\n}]);\n\n\n\n\nuf.directive('angularValidator', ['$injector', '$parse',\n    function ($injector, $parse) {\n        return {\n            restrict: 'A',\n            link: function (scope, element, attrs, fn) {\n                // This is the DOM form element\n                var DOMForm = angular.element(element)[0];\n                // an array to store all the watches for form elements\n                var watches = [];\n                // This is the the scope form model\n                // All validation states are contained here\n                var form_name = DOMForm.attributes['name'].value;\n                var scopeForm = $parse(form_name)(scope);\n                // Set the default submitted state to false\n                scopeForm.submitted = false;\n                // Watch form length to add watches for new form elements\n                scope.$watch(function () { return Object.keys(scopeForm).length; }, function () {\n                    // Destroy all the watches\n                    // This is cleaner than figuring out which items are already being watched and only un-watching those.\n                    angular.forEach(watches, function (watch) { watch(); });\n                    setupWatches(DOMForm);\n                });\n                // Intercept and handle submit events of the form\n                element.on('submit', function (event) {\n                    event.preventDefault();\n                    scope.$apply(function () {\n                        scopeForm.submitted = true;\n                    });\n\n                    // If the form is valid then call the function that is declared in the angular-validator-submit attribute on the form element\n                    if (scopeForm.$valid) {\n                        scope.$apply(function () {\n                            scope.$eval(DOMForm.attributes[\"angular-validator-submit\"].value);\n                        });\n                    }\n                });\n                scopeForm.reset = function () {\n                    // Clear all the form values\n                    for (var i = 0; i < DOMForm.length; i++) {\n                        if (DOMForm[i].name) {\n                            scopeForm[DOMForm[i].name].$setViewValue(\"\");\n                            scopeForm[DOMForm[i].name].$render();\n                        }\n                    }\n                    scopeForm.submitted = false;\n                    scopeForm.$setPristine();\n                };\n                // Setup watches on all form fields\n                setupWatches(DOMForm);\n\n                //check if there is invalid message service for the entire form; if yes, return the injected service; if no, return false;\n                function hasFormInvalidMessage(formElement) {\n                    if (formElement && 'invalid-message' in formElement.attributes) {\n                        return $injector.get(formElement.attributes['invalid-message'].value);\n                    } else {\n                        return false;\n                    }\n                }\n                // Iterate through the form fields and setup watches on each one\n                function setupWatches(formElement) {\n                    var formInvalidMessage = hasFormInvalidMessage(formElement);\n                    for (var i = 0; i < formElement.length; i++) {\n                        // This ensures we are only watching form fields\n                        if (i in formElement) {\n                            setupWatch(formElement[i], formInvalidMessage);\n                        }\n                    }\n                }\n                // Setup $watch on a single formfield\n                function setupWatch(elementToWatch, formInvalidMessage) {\n                    // If element is set to validate on blur then update the element on blur\n                    if (\"validate-on\" in elementToWatch.attributes && elementToWatch.attributes[\"validate-on\"].value === \"blur\") {\n                        angular.element(elementToWatch).on('blur', function () {\n                            updateValidationMessage(elementToWatch, formInvalidMessage);\n                            updateValidationClass(elementToWatch);\n                        });\n                    }\n                    var watch = scope.$watch(function () {\n                        return elementToWatch.value + elementToWatch.required + scopeForm.submitted + checkElementValidity(elementToWatch) + getDirtyValue(scopeForm[elementToWatch.name]) + getValidValue(scopeForm[elementToWatch.name]);\n                    },\n                        function () {\n\n                            if (scopeForm.submitted) {\n                                updateValidationMessage(elementToWatch, formInvalidMessage);\n                                updateValidationClass(elementToWatch);\n                            }\n                            else {\n                                // Determine if the element in question is to be updated on blur\n                                var isDirtyElement = \"validate-on\" in elementToWatch.attributes && elementToWatch.attributes[\"validate-on\"].value === \"dirty\";\n\n                                if (isDirtyElement) {\n                                    updateValidationMessage(elementToWatch, formInvalidMessage);\n                                    updateValidationClass(elementToWatch);\n                                }\n                                // This will get called in the case of resetting the form. This only gets called for elements that update on blur and submit.\n                                else if (scopeForm[elementToWatch.name] && scopeForm[elementToWatch.name].$pristine) {\n                                    updateValidationMessage(elementToWatch, formInvalidMessage);\n                                    updateValidationClass(elementToWatch);\n                                }\n                            }\n\n                        });\n\n                    watches.push(watch);\n                }\n                // Returns the $dirty value of the element if it exists\n                function getDirtyValue(element) {\n                    if (element) {\n                        if (\"$dirty\" in element) {\n                            return element.$dirty;\n                        }\n                    }\n                }\n                function getValidValue(element) {\n                    if (element) {\n                        if (\"$valid\" in element) {\n                            return element.$valid;\n                        }\n                    }\n                }\n                function checkElementValidity(element) {\n                    // If element has a custom validation function\n                    if (\"validator\" in element.attributes) {\n                        // Call the custom validator function\n                        var isElementValid;\n                        if (!element.attributes.validator || element.attributes.validator.value === \"\") {\n                            isElementValid = true;\n                        }\n                        else {\n                            isElementValid = scope.$eval(element.attributes.validator.value += ' === true');\n                        }\n\n                        if (scopeForm[element.name]) {\n                            scopeForm[element.name].$setValidity(\"angularValidator\", isElementValid);\n                            return isElementValid;\n                        }\n                        else {\n                            return true;\n                        }\n\n                    }\n                }\n                // Adds and removes an error message as a sibling element of the form field\n                // depending on the validity of the form field and the submitted state of the form.\n                // Will use default message if a custom message is not given\n                function updateValidationMessage(element, formInvalidMessage) {\n\n                    var defaultRequiredMessage = function () {\n                        return \"<i class='fa fa-times'></i> Required\";\n                    };\n                    var defaultInvalidMessage = function () {\n                        return \"<i class='fa fa-times'></i> Invalid\";\n                    };\n\n                    // Make sure the element is a form field and not a button for example\n                    // Only form elements should have names.\n                    if (!(element.name in scopeForm)) {\n                        return;\n                    }\n                    var scopeElementModel = scopeForm[element.name];\n\n                    // Remove all validation messages\n                    var validationMessageElement = isValidationMessagePresent(element);\n                    if (validationMessageElement) {\n                        validationMessageElement.remove();\n                    }\n                    // Only add validation messages if the form field is $dirty or the form has been submitted\n                    if (scopeElementModel.$dirty || (scope[element.form.name] && scope[element.form.name].submitted)) {\n\n                        if (scopeElementModel.$error.required) {\n                            // If there is a custom required message display it\n                            if (\"required-message\" in element.attributes) {\n                                angular.element(element).after(generateErrorMessage(element.attributes['required-message'].value));\n                            }\n                            // Display the default required message\n                            else {\n                                angular.element(element).after(generateErrorMessage(defaultRequiredMessage));\n                            }\n                        } else if (!scopeElementModel.$valid) {\n                            // If there is a custom validation message add it\n                            if (\"invalid-message\" in element.attributes) {\n                                angular.element(element).after(generateErrorMessage(element.attributes['invalid-message'].value));\n                            }\n                            // Display error message provided by custom service\n                            else if (formInvalidMessage) {\n                                angular.element(element).after(generateErrorMessage(formInvalidMessage.message(scopeElementModel, element)));\n                            }\n                            // Display the default error message\n                            else {\n                                angular.element(element).after(generateErrorMessage(defaultInvalidMessage));\n                            }\n                        }\n                    }\n                }\n                function generateErrorMessage(messageText) {\n                    return \"<label class='control-label has-error validationMessage'>\" + scope.$eval(messageText) + \"</label>\";\n                }\n                // Returns the validation message element or False\n                function isValidationMessagePresent(element) {\n                    var elementSiblings = angular.element(element).parent().children();\n                    for (var i = 0; i < elementSiblings.length; i++) {\n                        if (angular.element(elementSiblings[i]).hasClass(\"validationMessage\")) {\n                            return angular.element(elementSiblings[i]);\n                        }\n                    }\n                    return false;\n                }\n                // Adds and removes .has-error class to both the form element and the form element's parent\n                // depending on the validity of the element and the submitted state of the form\n                function updateValidationClass(element) {\n                    // Make sure the element is a form field and not a button for example\n                    // Only form fields should have names.\n                    if (!(element.name in scopeForm)) {\n                        return;\n                    }\n                    var formField = scopeForm[element.name];\n                    // This is extra for users wishing to implement the .has-error class on the field itself\n                    // instead of on the parent element. Note that Bootstrap requires the .has-error class to be on the parent element\n                    angular.element(element).removeClass('has-error');\n                    angular.element(element.parentNode).removeClass('has-error');\n                    // Only add/remove validation classes if the field is $dirty or the form has been submitted\n                    if (formField.$dirty || (scope[element.form.name] && scope[element.form.name].submitted)) {\n                        if (formField.$invalid) {\n                            angular.element(element.parentNode).addClass('has-error');\n                            // This is extra for users wishing to implement the .has-error class on the field itself\n                            // instead of on the parent element. Note that Bootstrap requires the .has-error class to be on the parent element\n                            angular.element(element).addClass('has-error');\n                        }\n                    }\n                }\n            }\n        };\n    }]);\n\nuf.directive('customField', ['$compile', function ($compile) {\n    return {\n        restrict: 'A',\n        controller: [\"$scope\", function($scope) {\n            var vm = this;\n            this.field = $scope.$parent.$eval('field');\n            this.form = {};\n        }],\n        require: '?^uForm',\n        controllerAs: 'custom',\n        scope: {},\n        link: function (scope, element, attrs, form) {\n            angular.extend(scope.custom.form, form);\n            var listener = scope.$watch(function () {\n                return scope.$parent.$eval(attrs.customField);\n            }, function (value) {\n                value = '<div ' + value + ' />';\n                element.html(value && value.toString());\n                var compileScope = scope;\n                $compile(element.contents())(compileScope);\n                listener(); //you don't need to watch the directive once it is compiled\n            });\n        }\n    };\n}])\n\nangular.forEach({\n    'input-text': 'appInputTextComponent',\n    'input-date': 'appInputDateComponent',\n    'input-time': 'appInputTimeComponent',\n    'input-datetime': 'appInputDatetimeComponent',\n    'input-password': 'appInputPasswordComponent',\n    'input-checkbox': 'appInputCheckboxComponent',\n    'input-radio': 'appInputRadioComponent',\n    'input-submit': 'appInputSubmitComponent',\n    'select': 'appSelectComponent',\n    'textarea': 'appTextareaComponent'\n}, function (directiveSelector, tpl) {\n    uf.directive(directiveSelector, function () {\n        return {\n            restrict: 'EA',\n            controller: [\"$scope\", \"$attrs\", function ($scope, $attrs) {\n                var directiveScope = $scope.$parent;\n                this.field = directiveScope.$eval('field');\n                this.ref = $scope;\n            }],\n            controllerAs: 'componentCtrl',\n            templateUrl: tpl + '.html',\n            scope: { \"model\": '=' },\n            replace: true,\n            link: function (scope, elem, attr) {\n            }\n        }\n    })\n});\n\n\n\n\n// 把对象变为数组，并按照 id 排序\nuf.filter('orderById', function () {\n    return function (items, field, reverse) {\n        var filtered = [];\n        angular.forEach(items, function (item, name) {\n            item[\"name\"] = name;\n            filtered.push(item);\n        });\n        filtered.sort(function (a, b) {\n            return (a[field] > b[field] ? 1 : -1);\n        });\n        if (reverse) filtered.reverse();\n        return filtered;\n    };\n});\n\nuf.provider('ufield', [function() {\r\n    var _tp = 'input'; // type\r\n    var _vo = 'dirty'; // validateOn\r\n    var _setOpts = function(opts){\r\n        var _opts = {};\r\n        opts = opts || {};\r\n        _opts.type = (angular.isDefined(opts.type)) ? opts.type : _tp; // type\r\n        _opts.validateOn = (angular.isDefined(opts.validateOn) && ((opts.validateOn === 'dirty') || (opts.validateOn === 'blur'))) ? opts.validateOn : _vo; // validate_on\r\n        return _opts;\r\n    }; // end _setOpts\r\n    this.useType = function(val) {\r\n        if(angular.isDefined(val))\r\n        _tp = val;\r\n    }\r\n    this.useValidateOn = function(val) {\r\n        if(angular.isDefined(val))\r\n        _vo = val;\r\n    }\r\n    this.$get = [function() {\r\n        return {\r\n            create : function (opts) {\r\n                opts = _setOpts(opts);\r\n                return opts;\r\n            }\r\n        }\r\n    }]\r\n}])\nuf.directive(\"upFieldHide\", [\"$parse\", function ($parse) {\n    return {\n        require: \"?^uForm\",\n        restrict: 'A',\n        link: function (scope, element, attr, form) {\n            var exp;\n            if ('hide' in scope.field) {\n                scope.$watch(function () {\n                    var res = $parse(attr.upFieldHide)(form.result);\n                    return res;\n                }, function (value) {\n                    // hide the element\n                    element.css('display', value ? 'none' : '');\n                    // delete the hide element from resutl\n                    if (value) { delete form.result[scope.field.name]; }\n                })\n            }\n        }\n    }\n}])\n\nuf.directive(\"uForm\", [\"$rootScope\", function ($rootScope) {\n    return {\n        templateUrl: 'form.html',\n        transclude: true,\n        restrict: \"EA\",\n        controller: [\"$scope\", \"$attrs\", \"$rootScope\", \"ufield\", function ($scope, $attrs, $rootScope, ufield) {\n            var $parent = $scope.$parent;\n            this.fields = $parent.$eval($attrs.fields);\n            angular.forEach(this.fields, function(field) {\n                angular.extend(field, ufield.create(field));\n            })\n            this.option = $parent.$eval($attrs.option);\n            this.result = $parent.$eval($attrs.result) || $parent.$eval($attrs.result + \"={}\");\n            this.ref = $scope;\n        }],\n        scope: {},\n        controllerAs: \"uform\",\n        require: '?^uFormGroup',\n        link: function (scope, elem, attr, group) {\n            group && group.fields && group.fields.push(scope.form.fields);\n            group && group.result && group.result.push(scope.form.result);\n        }\n\n    }\n}]);\n\nuf.directive(\"uFormGroup\", function () {\n    return {\n        controller: [\"$scope\", \"$attrs\", function ($scope, $attrs) {\n            this.fields = $scope.$parent.$eval($attrs.fields) || $scope.$parent.$eval($attrs.fields + \"=[]\");;\n            this.result = $scope.$parent.$eval($attrs.result) || $scope.$parent.$eval($attrs.result + \"=[]\");;\n        }],\n        scope: {},\n        template: '<div ng-transclude></div>',\n        controllerAs: \"uFormGroup\",\n        transclude: true\n    }\n});\n\n}());\nangular.module('up.uform').run(['$templateCache', function($templateCache) {$templateCache.put('form.html','<div><style type=text/css>\\n\\t\\t.form-inline .inline-control {\\n\\t\\t\\tdisplay: inline-block;\\n\\t\\t}\\n\\t\\t.form-inline .datepicker {\\n\\t\\t\\twidth: 120px;\\n\\t\\t}\\n\\t\\t.form-inline input[type=\\'text\\'] {\\n\\t\\t\\twidth: 120px;\\n\\t\\t}\\n\\t\\t.form-inline .form-group {\\n\\t\\t    display: inline-block;\\n\\t\\t    margin-bottom: 0;\\n\\t\\t    vertical-align: middle;\\n\\t\\t    margin-right: 10px;\\n\\t\\t}\\n\\t\\t.form-horizontal .control-label {\\n\\t\\t\\ttext-align: right;\\n\\t\\t}\\n\\t\\t.control-datepicker {\\n\\t\\t\\tpadding-left: 0;\\n\\t\\t}\\n\\t\\t.timepicker tr.text-center {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t</style><div class=form-group up-field-hide={{field.hide}} ng-class=field.name ng-repeat=\"field in uform.fields | orderById: \\'id\\'\"><label for={{field.name}} ng-class=uform.option.labelClass class=control-label><span ng-show=\"field.required && field.label\">*</span> <span ng-if=\"field.type!=\\'input:checkbox\\'\">{{ field.label }}</span></label><div ng-switch=field.type ng-class=uform.option.inputClass><div ng-switch-when=input app-input-text-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=input:multiple app-input-multiple-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=input:date app-input-date-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=input:time app-input-time-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=input:datetime app-input-datetime-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=input:password app-input-password-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=input:checkbox app-input-checkbox-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=input:radio app-input-radio-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=input:submit app-input-submit-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=textarea app-textarea-component=\"\" model=uform.result[field.name]></div><div ng-switch-when=select app-select-component=\"\" model=uform.result[field.name]></div><div ng-switch-default=\"\" custom-field=field.type></div></div></div><div ng-transclude=\"\"></div></div>');\n$templateCache.put('input-checkbox.html','<div class=checkbox><label><input type=checkbox name={{componentCtrl.field.name}} ng-model=componentCtrl.ref.model> {{ componentCtrl.field.label }}</label></div>');\n$templateCache.put('input-date.html','<div><input type=text name={{componentCtrl.field.name}} class=\"form-control datepicker\" datepicker-popup=yyyy-MM-dd ng-model=componentCtrl.ref.model ng-init=\"componentCtrl.ref.open=false\" is-open=componentCtrl.ref.open ng-style=componentCtrl.field.style show-button-bar=false ng-click=\"componentCtrl.ref.open=!componentCtrl.ref.open\"></div>');\n$templateCache.put('input-datetime.html','<div><div class=\"col-xs-6 control-datepicker\"><input type=text name={{componentCtrl.field.name}} class=\"form-control datepicker\" datepicker-popup=yyyy-MM-dd ng-model=componentCtrl.ref.model ng-init=\"componentCtrl.ref.open=false\" is-open=componentCtrl.ref.open show-button-bar=false ng-click=\"componentCtrl.ref.open=!componentCtrl.ref.open\"></div><div><div class=timepicker timepicker=\"\" ng-model=componentCtrl.ref.model></div></div></div>');\n$templateCache.put('input-multiple.html','<select ng-init=\"componentCtrl.ref.model=componentCtrl.field.candidates[0].value\" class=form-control ng-model=componentCtrl.ref.model name={{componentCtrl.field.name}} ng-options=\"option.value as option.name for option in componentCtrl.field.candidates\" multiple=\"\" ng-required=componentCtrl.field.required></select>');\n$templateCache.put('input-password.html','<input type=password id={{componentCtrl.field.name}} name={{componentCtrl.field.name}} ng-model=componentCtrl.ref.model ng-required=componentCtrl.field.required required-message=\"\\'{{componentCtrl.field.requiredMsg}}\\'\" ng-maxlength={{componentCtrl.field.maxlength}} ng-minlength={{componentCtrl.field.minlength}} ng-pattern={{componentCtrl.field.pattern}} validate-on={{componentCtrl.field.validateOn}} validator={{componentCtrl.field.validator}} invalid-message={{componentCtrl.field.validator}} class=form-control ng-disabled=componentCtrl.field.disabled ng-attr-placeholder={{componentCtrl.field.placeholder}} ng-style=componentCtrl.field.style>');\n$templateCache.put('input-radio.html','<div><div class=radio-inline ng-repeat=\"candidate in componentCtrl.field.candidates\"><label><input type=radio ng-init=\"componentCtrl.ref.model=componentCtrl.field.candidates[0].value\" ng-model=componentCtrl.ref.model name={{componentCtrl.field.name}} value={{candidate.value}} ng-required=componentCtrl.field.required>{{candidate.label}}</label></div></div>');\n$templateCache.put('input-submit.html','<input class=\"btn btn-primary\" type=submit value={{componentCtrl.field.value}}>');\n$templateCache.put('input-text.html','<input type=text id={{componentCtrl.field.name}} name={{componentCtrl.field.name}} ng-model=componentCtrl.ref.model ng-required=componentCtrl.field.required required-message=\"\\'{{componentCtrl.field.requiredMsg}}\\'\" ng-maxlength={{componentCtrl.field.maxlength}} ng-minlength={{componentCtrl.field.minlength}} ng-pattern={{componentCtrl.field.pattern}} validate-on={{componentCtrl.field.validateOn}} validator={{componentCtrl.field.validator}} invalid-message={{componentCtrl.field.validator}} class=form-control ng-disabled=componentCtrl.field.disabled ng-attr-placeholder={{componentCtrl.field.placeholder}} ng-style=componentCtrl.field.style>');\n$templateCache.put('input-time.html','<div><div class=timepicker timepicker=\"\" ng-model=componentCtrl.ref.model></div></div>');\n$templateCache.put('select.html','<select ng-init=\"componentCtrl.ref.model=componentCtrl.field.candidates[0].value\" class=form-control ng-model=componentCtrl.ref.model name={{componentCtrl.field.name}} ng-options=\"option.value as option.name for option in componentCtrl.field.candidates\" ng-required=componentCtrl.field.required></select>');\n$templateCache.put('textarea.html','<textarea id={{componentCtrl.field.name}} name={{componentCtrl.field.name}} ng-model=componentCtrl.ref.model ng-required=componentCtrl.field.required required-message=\"\\'{{componentCtrl.field.requiredMsg}}\\'\" ng-maxlength={{componentCtrl.field.maxlength}} ng-minlength={{componentCtrl.field.minlength}} ng-pattern={{componentCtrl.field.pattern}} validate-on={{componentCtrl.field.validateOn}} validator={{componentCtrl.field.validator}} invalid-message={{componentCtrl.field.validator}} class=form-control ng-disabled=componentCtrl.field.disabled ng-attr-placeholder={{componentCtrl.field.placeholder}} ng-style=componentCtrl.field.style>\\n</textarea>');}]);",null,null],"sourceRoot":"/source/"}