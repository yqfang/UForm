{"version":3,"sources":["uform.js","uform_without_templates.js","templates.js"],"names":["uf","angular","module","config","$provide","datepickerConfig","showWeeks","decorator","$delegate","ngModel","controller","scope","element","attrs","$injector","$interpolate","get","$set","name","validator","invoke","this","$scope","$element","$attrs","forEach","ng-form","form","directive","ngForm","$compile","restrict","field","$parent","$eval","require","controllerAs","link","extend","$proxy","html","compileField","contents","$parse","attr","$watch","res","result","value","disabled","ufieldHide","css","$rootScope","templateUrl","transclude","ufield","fields","create","option","elem","group","uform","$form","push","template","modelCtrl","capitalize","inputValue","undefined","capitalized","toUpperCase","$setViewValue","$render","$parsers","ele","truncateTo","length","parseInt","truncate","substring","upDate","upTime","upDatetime","upPassword","upCheckbox","upRadio","upSubmit","upSelect","upTextarea","tpl","direct","uFormUtil","getTemplate","then","textTpl","replace","toAttrs","vm","customs","provider","_tp","_vo","_pt","_setOpts","opts","_opts","type","isDefined","validateOn","pattern","useType","val","useValidateOn","usePattern","$get","fn","hasFormInvalidMessage","formElement","attributes","setupWatches","formInvalidMessage","i","setupWatch","elementToWatch","on","updateValidationMessage","updateValidationClass","watch","required","scopeForm","submitted","checkElementValidity","getDirtyValue","getValidValue","isDirtyElement","$pristine","watches","$dirty","$valid","isElementValid","$setValidity","defaultRequiredMessage","defaultInvalidMessage","scopeElementModel","validationMessageElement","isValidationMessagePresent","remove","$error","after","generateErrorMessage","message","messageText","elementSiblings","parent","children","hasClass","formField","removeClass","parentNode","$invalid","addClass","DOMForm","form_name","Object","keys","event","preventDefault","$apply","reset","$setPristine","filter","items","reverse","filtered","item","sort","a","b","factory","$templateCache","$q","$http","dialogs","obj","str","o","next","tpath","when","cache","put","data","response","error","run"],"mappings":"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","file":"uform.min.js","sourcesContent":["/*!\n * uform\n * https://github.com/yqfang/UForm#readme\n * yqfang,qianzhixiang\n * Version: 1.0.0 - 2016-07-12T15:48:27.150Z\n * License: ISC\n */\n\n\n(function() { \n\"use strict\";\nvar uf = angular.module('up.uform', ['ui.bootstrap']);\n\nuf.config([\"$provide\", \"datepickerConfig\", function ($provide, datepickerConfig) {\n    datepickerConfig.showWeeks = false;\n    $provide.decorator('ngModelDirective', [\"$delegate\", function ($delegate) {\n        var ngModel = $delegate[0], controller = ngModel.controller;\n        ngModel.controller = ['$scope', '$element', '$attrs', '$injector', function (scope, element, attrs, $injector) {\n            var $interpolate = $injector.get('$interpolate');\n            attrs.$set('name', $interpolate(attrs.name || '')(scope));\n            attrs.$set('validator', $interpolate(attrs.validator || '')(scope));\n            $injector.invoke(controller, this, {\n                '$scope': scope,\n                '$element': element,\n                '$attrs': attrs\n            });\n        }];\n        return $delegate;\n    }]);\n\n    angular.forEach({ 'ng-form': 'ngFormDirective', 'form': 'formDirective' }, function (directive) {\n        $provide.decorator(directive, [\"$delegate\", function ($delegate) {\n            var form = $delegate[0], controller = form.controller;\n            form.controller = ['$scope', '$element', '$attrs', '$injector', function (scope, element, attrs, $injector) {\n                var $interpolate = $injector.get('$interpolate');\n                attrs.$set('name', $interpolate(attrs.name || attrs.ngForm || '')(scope));\n                attrs.$set('angular-validator', \"\");\n                $injector.invoke(controller, this, {\n                    '$scope': scope,\n                    '$element': element,\n                    '$attrs': attrs\n                });\n            }];\n            return $delegate;\n        }]);\n    })\n}]);\n\n\n\n\n\nuf.directive('compileField', ['$compile', function ($compile) {\n    return {\n        restrict: 'A',\n        controller: [\"$scope\", function($scope) {\n            var vm = this;\n            this.field = $scope.$parent.$eval('field');\n            this.form = {};\n        }],\n        require: '?^uForm',\n        controllerAs: '$proxy',\n        scope: {},\n        link: function (scope, element, attrs, form) {\n            angular.extend(scope.$proxy.form, form);\n            element.html('<div ' + scope.$parent.$eval(attrs.compileField) + ' />');\n            $compile(element.contents())(scope);\n        }\n    };\n}])\n\nuf.directive(\"ufieldDisabled\", [\"$parse\", function ($parse) {\n    return {\n        require: \"?^uForm\",\n        restrict: 'A',\n        link: function (scope, element, attr, form) {\n            scope.$watch(function () {\n                var res = $parse(attr['ufieldDisabled'])(form.result);\n                return res;\n            }, function (value) {\n                element[0].disabled = value;\n            })\n        }\n    }\n}])\n\nuf.directive(\"ufieldHide\", [\"$parse\", function ($parse) {\n    return {\n        require: \"?^uForm\",\n        restrict: 'A',\n        link: function (scope, element, attr, form) {\n            var exp;\n            if ('hide' in scope.field) {\n                scope.$watch(function () {\n                    var res = $parse(attr.ufieldHide)(form.result);\n                    return res;\n                }, function (value) {\n                    // hide the element\n                    element.css('display', value ? 'none' : '');\n                    // delete the hide element from resutl\n                    if (value) { delete form.result[scope.field.name]; }\n                })\n            }\n        }\n    }\n}])\n\nuf.directive(\"uForm\", [\"$rootScope\", function ($rootScope) {\n    return {\n        templateUrl: 'form.html',\n        transclude: true,\n        restrict: \"EA\",\n        controller: [\"$scope\", \"$attrs\", \"$rootScope\", \"ufield\", function ($scope, $attrs, $rootScope, ufield) {\n            var $parent = $scope.$parent;\n            this.fields = $parent.$eval($attrs.fields);\n            angular.forEach(this.fields, function(field) {\n                angular.extend(field, ufield.create(field));\n            })\n            this.option = $parent.$eval($attrs.option);\n            this.result = $parent.$eval($attrs.result) || $parent.$eval($attrs.result + \"={}\");\n        }],\n        scope: {},\n        controllerAs: \"uform\",\n        require: '?^uFormGroup',\n        link: function (scope, elem, attr, group) {\n            scope.uform.$form = scope.$parent.$eval(attr.name);\n            group && group.fields && group.fields.push(scope.uform.fields);\n            group && group.result && group.result.push(scope.uform.result);\n        }\n\n    }\n}]);\n\nuf.directive(\"uFormGroup\", function () {\n    return {\n        controller: [\"$scope\", \"$attrs\", function ($scope, $attrs) {\n            this.fields = $scope.$parent.$eval($attrs.fields) || $scope.$parent.$eval($attrs.fields + \"=[]\");;\n            this.result = $scope.$parent.$eval($attrs.result) || $scope.$parent.$eval($attrs.result + \"=[]\");;\n        }],\n        scope: {},\n        template: '<div ng-transclude></div>',\n        controllerAs: \"uFormGroup\",\n        transclude: true\n    }\n});\n\nuf\n  .directive('capitalize', function() {\n    return {\n      require: 'ngModel',\n      link: function(scope, element, attrs, modelCtrl) {\n        var capitalize = function(inputValue) {\n          if (inputValue == undefined) inputValue = '';\n          var capitalized = inputValue.toUpperCase();\n          if (capitalized !== inputValue) {\n            modelCtrl.$setViewValue(capitalized);\n            modelCtrl.$render();\n          }\n          return capitalized;\n        }\n        modelCtrl.$parsers.push(capitalize);\n        capitalize(\"\"); // capitalize initial value\n      }\n    };\n  });\n\nuf.directive(\"truncateTo\", [\"$parse\", function ($parse) {\n    return {\n        require: 'ngModel',\n        restrict: 'A',\n        link: function (scope, ele, attrs, modelCtrl) {\n\n            var truncateTo = function(inputValue) {\n                var length = parseInt(attrs['truncateTo']);\n                if (inputValue == undefined) inputValue = '';\n                var truncate = inputValue.substring(0, length);\n                if (truncate !== inputValue) {\n                    modelCtrl.$setViewValue(truncate);\n                    modelCtrl.$render();\n                }\n                return truncate;\n            }\n            modelCtrl.$parsers.push(truncateTo);\n            truncateTo(\"\");\n        }\n    }\n}])\n\nangular.forEach({\n    upDate: \"up-date\",\n    upTime: \"up-time\",\n    upDatetime: \"up-datetime\",\n    upPassword: \"up-password\",\n    upCheckbox: \"up-checkbox\",\n    upRadio: \"up-radio\",\n    upSubmit: \"up-submit\",\n    upSelect: \"up-select\",\n    upTextarea: \"up-textarea\",\n}, function (tpl, direct) {\n    uf.directive(direct, ['$compile', 'uFormUtil', function ($compile, uFormUtil) {\n        return {\n            restrict: 'EA',\n            controller: [\"$scope\", function ($scope) {\n                angular.extend(this, $scope.$proxy);\n            }],\n            controllerAs: 'vm',\n            link: function (scope, elem, attr) {\n                 uFormUtil.getTemplate(tpl).then(function(textTpl) {\n                        elem.html(textTpl.replace(/ng-model/g, uFormUtil.toAttrs(scope.vm.field.customs) + \"ng-model\"));\n                        $compile(elem.contents())(scope);\n                    })\n            }\n        }\n    }])\n});\n\n\n\n\nuf.directive('upText', ['$compile', 'uFormUtil', function ($compile, uFormUtil) {\r\n    return {\r\n        restrict: 'EA',\r\n        controller: [\"$scope\", function ($scope) {\r\n            angular.extend(this, $scope.$proxy);\r\n        }],\r\n        controllerAs: 'vm',\r\n        link: function (scope, elem, attr) {\r\n            uFormUtil.getTemplate('up-text').then(function(textTpl) {\r\n                elem.html(textTpl.replace(/ng-model/g, uFormUtil.toAttrs(scope.vm.field.customs) + \"ng-model\"));\r\n                $compile(elem.contents())(scope);\r\n            });\r\n        }\r\n    }\r\n}])\nuf.provider('ufield', [function() {\n    var _tp = 'up-text'; // type\n    var _vo = 'dirty'; // validateOn\n    var _pt = /^.*$/; // defaut pattern\n    var _setOpts = function(opts){\n        var _opts = {};\n        opts = opts || {};\n        _opts.type = (angular.isDefined(opts.type)) ? opts.type : _tp; // type\n        _opts.validateOn = (angular.isDefined(opts.validateOn) && ((opts.validateOn === 'dirty') || (opts.validateOn === 'blur'))) ? opts.validateOn : _vo; // validate_on\n        _opts.pattern = (angular.isDefined(opts.pattern)) ? opts.pattern : _pt;\n        return _opts;\n    }; // end _setOpts\n    this.useType = function(val) {\n        if(angular.isDefined(val))\n        _tp = val;\n    }\n    this.useValidateOn = function(val) {\n        if(angular.isDefined(val))\n        _vo = val;\n    }\n    this.usePattern = function(val) {\n        if(angular.isDefined(val))\n        _pt = val;\n    }\n    this.$get = [function() {\n        return {\n            create : function (opts) {\n                opts = _setOpts(opts);\n                return opts;\n            }\n        }\n    }]\n}])\n\nuf.directive('angularValidator', ['$injector', '$parse',\n    function ($injector, $parse) {\n        return {\n            restrict: 'A',\n            link: function (scope, element, attrs, fn) {\n                // This is the DOM form element\n                var DOMForm = angular.element(element)[0];\n                // an array to store all the watches for form elements\n                var watches = [];\n                // This is the the scope form model\n                // All validation states are contained here\n                var form_name = DOMForm.attributes['name'].value;\n                var scopeForm = $parse(form_name)(scope);\n                // Set the default submitted state to false\n                scopeForm.submitted = false;\n                // Watch form length to add watches for new form elements\n                scope.$watch(function () { return Object.keys(scopeForm).length; }, function () {\n                    // Destroy all the watches\n                    // This is cleaner than figuring out which items are already being watched and only un-watching those.\n                    angular.forEach(watches, function (watch) { watch(); });\n                    setupWatches(DOMForm);\n                });\n                // Intercept and handle submit events of the form\n                element.on('submit', function (event) {\n                    event.preventDefault();\n                    scope.$apply(function () {\n                        scopeForm.submitted = true;\n                    });\n\n                    // If the form is valid then call the function that is declared in the angular-validator-submit attribute on the form element\n                    if (scopeForm.$valid) {\n                        scope.$apply(function () {\n                            scope.$eval(DOMForm.attributes[\"angular-validator-submit\"].value);\n                        });\n                    }\n                });\n                scopeForm.reset = function () {\n                    // Clear all the form values\n                    for (var i = 0; i < DOMForm.length; i++) {\n                        if (DOMForm[i].name) {\n                            scopeForm[DOMForm[i].name].$setViewValue(\"\");\n                            scopeForm[DOMForm[i].name].$render();\n                        }\n                    }\n                    scopeForm.submitted = false;\n                    scopeForm.$setPristine();\n                };\n                // Setup watches on all form fields\n                setupWatches(DOMForm);\n\n                //check if there is invalid message service for the entire form; if yes, return the injected service; if no, return false;\n                function hasFormInvalidMessage(formElement) {\n                    if (formElement && 'invalid-message' in formElement.attributes) {\n                        return $injector.get(formElement.attributes['invalid-message'].value);\n                    } else {\n                        return false;\n                    }\n                }\n                // Iterate through the form fields and setup watches on each one\n                function setupWatches(formElement) {\n                    var formInvalidMessage = hasFormInvalidMessage(formElement);\n                    for (var i = 0; i < formElement.length; i++) {\n                        // This ensures we are only watching form fields\n                        if (i in formElement) {\n                            setupWatch(formElement[i], formInvalidMessage);\n                        }\n                    }\n                }\n                // Setup $watch on a single formfield\n                function setupWatch(elementToWatch, formInvalidMessage) {\n                    // If element is set to validate on blur then update the element on blur\n                    if (\"validate-on\" in elementToWatch.attributes && elementToWatch.attributes[\"validate-on\"].value === \"blur\") {\n                        angular.element(elementToWatch).on('blur', function () {\n                            updateValidationMessage(elementToWatch, formInvalidMessage);\n                            updateValidationClass(elementToWatch);\n                        });\n                    }\n                    var watch = scope.$watch(function () {\n                        return elementToWatch.value + elementToWatch.required + scopeForm.submitted + checkElementValidity(elementToWatch) + getDirtyValue(scopeForm[elementToWatch.name]) + getValidValue(scopeForm[elementToWatch.name]);\n                    },\n                        function () {\n\n                            if (scopeForm.submitted) {\n                                updateValidationMessage(elementToWatch, formInvalidMessage);\n                                updateValidationClass(elementToWatch);\n                            }\n                            else {\n                                // Determine if the element in question is to be updated on blur\n                                var isDirtyElement = \"validate-on\" in elementToWatch.attributes && elementToWatch.attributes[\"validate-on\"].value === \"dirty\";\n\n                                if (isDirtyElement) {\n                                    updateValidationMessage(elementToWatch, formInvalidMessage);\n                                    updateValidationClass(elementToWatch);\n                                }\n                                // This will get called in the case of resetting the form. This only gets called for elements that update on blur and submit.\n                                else if (scopeForm[elementToWatch.name] && scopeForm[elementToWatch.name].$pristine) {\n                                    updateValidationMessage(elementToWatch, formInvalidMessage);\n                                    updateValidationClass(elementToWatch);\n                                }\n                            }\n\n                        });\n\n                    watches.push(watch);\n                }\n                // Returns the $dirty value of the element if it exists\n                function getDirtyValue(element) {\n                    if (element) {\n                        if (\"$dirty\" in element) {\n                            return element.$dirty;\n                        }\n                    }\n                }\n                function getValidValue(element) {\n                    if (element) {\n                        if (\"$valid\" in element) {\n                            return element.$valid;\n                        }\n                    }\n                }\n                function checkElementValidity(element) {\n                    // If element has a custom validation function\n                    if (\"validator\" in element.attributes) {\n                        // Call the custom validator function\n                        var isElementValid;\n                        if (!element.attributes.validator || element.attributes.validator.value === \"\") {\n                            isElementValid = true;\n                        }\n                        else {\n                            isElementValid = (scope.$eval(element.attributes.validator.value) == true);\n                        }\n\n                        if (scopeForm[element.name]) {\n                            scopeForm[element.name].$setValidity(\"angularValidator\", isElementValid);\n                            return isElementValid;\n                        }\n                        else {\n                            return true;\n                        }\n\n                    }\n                }\n                // Adds and removes an error message as a sibling element of the form field\n                // depending on the validity of the form field and the submitted state of the form.\n                // Will use default message if a custom message is not given\n                function updateValidationMessage(element, formInvalidMessage) {\n\n                    var defaultRequiredMessage = function () {\n                        return \"<i class='fa fa-times'></i> Required\";\n                    };\n                    var defaultInvalidMessage = function () {\n                        return \"<i class='fa fa-times'></i> Invalid\";\n                    };\n\n                    // Make sure the element is a form field and not a button for example\n                    // Only form elements should have names.\n                    if (!(element.name in scopeForm)) {\n                        return;\n                    }\n                    var scopeElementModel = scopeForm[element.name];\n\n                    // Remove all validation messages\n                    var validationMessageElement = isValidationMessagePresent(element);\n                    if (validationMessageElement) {\n                        validationMessageElement.remove();\n                    }\n                    // Only add validation messages if the form field is $dirty or the form has been submitted\n                    if (scopeElementModel.$dirty || (scope[element.form.name] && scope[element.form.name].submitted)) {\n\n                        if (scopeElementModel.$error.required) {\n                            // If there is a custom required message display it\n                            if (\"required-message\" in element.attributes) {\n                                angular.element(element).after(generateErrorMessage(element.attributes['required-message'].value));\n                            }\n                            // Display the default required message\n                            else {\n                                angular.element(element).after(generateErrorMessage(defaultRequiredMessage));\n                            }\n                        } else if (!scopeElementModel.$valid) {\n                            // If there is a custom validation message add it\n                            if (\"invalid-message\" in element.attributes) {\n                                angular.element(element).after(generateErrorMessage(element.attributes['invalid-message'].value));\n                            }\n                            // Display error message provided by custom service\n                            else if (formInvalidMessage) {\n                                angular.element(element).after(generateErrorMessage(formInvalidMessage.message(scopeElementModel, element)));\n                            }\n                            // Display the default error message\n                            else {\n                                angular.element(element).after(generateErrorMessage(defaultInvalidMessage));\n                            }\n                        }\n                    }\n                }\n                function generateErrorMessage(messageText) {\n                    return \"<label class='control-label has-error validationMessage'>\" + scope.$eval(messageText) + \"</label>\";\n                }\n                // Returns the validation message element or False\n                function isValidationMessagePresent(element) {\n                    var elementSiblings = angular.element(element).parent().children();\n                    for (var i = 0; i < elementSiblings.length; i++) {\n                        if (angular.element(elementSiblings[i]).hasClass(\"validationMessage\")) {\n                            return angular.element(elementSiblings[i]);\n                        }\n                    }\n                    return false;\n                }\n                // Adds and removes .has-error class to both the form element and the form element's parent\n                // depending on the validity of the element and the submitted state of the form\n                function updateValidationClass(element) {\n                    // Make sure the element is a form field and not a button for example\n                    // Only form fields should have names.\n                    if (!(element.name in scopeForm)) {\n                        return;\n                    }\n                    var formField = scopeForm[element.name];\n                    // This is extra for users wishing to implement the .has-error class on the field itself\n                    // instead of on the parent element. Note that Bootstrap requires the .has-error class to be on the parent element\n                    angular.element(element).removeClass('has-error');\n                    angular.element(element.parentNode).removeClass('has-error');\n                    // Only add/remove validation classes if the field is $dirty or the form has been submitted\n                    if (formField.$dirty || (scope[element.form.name] && scope[element.form.name].submitted)) {\n                        if (formField.$invalid) {\n                            angular.element(element.parentNode).addClass('has-error');\n                            // This is extra for users wishing to implement the .has-error class on the field itself\n                            // instead of on the parent element. Note that Bootstrap requires the .has-error class to be on the parent element\n                            angular.element(element).addClass('has-error');\n                        }\n                    }\n                }\n            }\n        };\n    }]);\n\n// 把对象变为数组，并按照 id 排序\nuf.filter('orderById', function () {\n    return function (items, field, reverse) {\n        var filtered = [];\n        angular.forEach(items, function (item, name) {\n            item[\"name\"] = name;\n            filtered.push(item);\n        });\n        filtered.sort(function (a, b) {\n            return (a[field] > b[field] ? 1 : -1);\n        });\n        if (reverse) filtered.reverse();\n        return filtered;\n    };\n});\n\nuf.factory('uFormUtil', [\"$templateCache\", \"$q\", \"$http\", \"dialogs\", function($templateCache, $q, $http, dialogs) {\n    return {\n        toAttrs: toAttrs,\n        getTemplate: getTemplate\n    }\n    function toAttrs(obj) {\n        if(!obj) {\n            return \"\";\n        }\n        var str = \"\";\n        for(var o in obj) {\n            var next;\n            if(!obj[o]) {\n                next = o;\n            }else {\n                next = (o + '=' + obj[o])\n            }\n            str += (next + ' ')\n        }\n        return str;\n    }\n    function getTemplate (name) {\n        var tpath = name + '.html';\n        var tpl = $templateCache.get(tpath);\n        if(tpl) {\n            return $q.when(tpl);\n        }else {\n            return $http.get(tpath, {cache: true}).then(function(html) {\n                $templateCache.put(tpath, html);\n                return html.data;\n            }, function(response) {\n                dialogs.error(\"模板错误!\", \"通过：\" + tpath + \" 找不到模板\");\n            })\n        }\n    }\n}])\n\n}());\nangular.module('up.uform').run(['$templateCache', function($templateCache) {$templateCache.put('form.html','<div><style type=text/css>\\n\\t\\t.form-inline .inline-control {\\n\\t\\t\\tdisplay: inline-block;\\n\\t\\t}\\n\\t\\t.form-inline .datepicker {\\n\\t\\t\\twidth: 120px;\\n\\t\\t}\\n\\t\\t.form-inline input[type=\\'text\\'] {\\n\\t\\t\\twidth: 120px;\\n\\t\\t}\\n\\t\\t.form-inline .form-group {\\n\\t\\t    display: inline-block;\\n\\t\\t    margin-bottom: 0;\\n\\t\\t    vertical-align: middle;\\n\\t\\t    margin-right: 10px;\\n\\t\\t}\\n\\t\\t.form-horizontal .control-label {\\n\\t\\t\\ttext-align: right;\\n\\t\\t}\\n\\t\\t.control-datepicker {\\n\\t\\t\\tpadding-left: 0;\\n\\t\\t}\\n\\t\\t.timepicker tr.text-center {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t</style><div class=form-group ufield-hide={{field.hide}} ng-class=field.name ng-repeat=\"field in (uform.fields | orderById: \\'id\\')\"><label for={{field.name}} ng-class=uform.option.labelClass class=control-label><span ng-show=\"field.required && field.label\">*</span> <span ng-if=\"field.type!=\\'up-checkbox\\'\">{{ field.label }}</span></label><div compile-field=field.type ng-class=uform.option.inputClass></div></div><div ng-transclude=\"\"></div></div>');\n$templateCache.put('up-checkbox.html','<div class=checkbox><label><input type=checkbox name={{vm.field.name}} ng-model=vm.form.result[vm.field.name]> {{ vm.field.label }}</label></div>');\n$templateCache.put('up-date.html','<div><input type=text name={{vm.field.name}} class=\"form-control datepicker\" datepicker-popup=yyyy-MM-dd ng-model=vm.form.result[vm.field.name] ng-init=\"vm.form.open=false\" is-open=vm.form.open ng-style=vm.field.style show-button-bar=false ng-click=\"vm.form.open=!vm.form.open\"></div>');\n$templateCache.put('up-datetime.html','<div><div class=\"col-xs-6 control-datepicker\"><input type=text name={{vm.field.name}} class=\"form-control datepicker\" datepicker-popup=yyyy-MM-dd ng-model=vm.form.result[vm.field.name] ng-init=\"vm.form.open=false\" is-open=vm.form.open show-button-bar=false ng-click=\"vm.form.open=!vm.form.open\"></div><div><div class=timepicker timepicker=\"\" ng-model=vm.form.result[vm.field.name]></div></div></div>');\n$templateCache.put('up-password.html','<input type=password id={{vm.field.name}} name={{vm.field.name}} ng-model=vm.form.result[vm.field.name] ng-required=vm.field.required required-message=\"\\'{{vm.field.requiredMsg}}\\'\" ng-maxlength={{vm.field.maxlength}} ng-minlength={{vm.field.minlength}} ng-pattern=vm.field.pattern validate-on={{vm.field.validateOn}} validator={{vm.field.validator}} invalid-message={{vm.field.validator}} class=form-control ufield-disabled={{vm.field.disabled}} ng-attr-placeholder={{vm.field.placeholder}} ng-style=vm.field.style>');\n$templateCache.put('up-radio.html','<div><div class=radio-inline ng-repeat=\"candidate in vm.field.candidates\"><label><input type=radio ng-init=\"vm.form.result[vm.field.name]=vm.field.candidates[0].value\" ng-model=vm.form.result[vm.field.name] name={{vm.field.name}} value={{candidate.value}} ng-required=vm.field.required>{{candidate.label}}</label></div></div>');\n$templateCache.put('up-select.html','<select ng-init=\"vm.form.result[vm.field.name]=vm.field.candidates[0].value\" class=form-control ng-model=vm.form.result[vm.field.name] name={{vm.field.name}} ng-options=\"option.value as option.name for option in vm.field.candidates\" ng-required=vm.field.required></select>');\n$templateCache.put('up-submit.html','<input class=\"btn btn-primary\" type=submit value={{vm.field.value}}>');\n$templateCache.put('up-text.html','<input type=text id={{vm.field.name}} name={{vm.field.name}} ng-model=vm.form.result[vm.field.name] ng-required=vm.field.required required-message=\"\\'{{vm.field.requiredMsg}}\\'\" ng-maxlength={{vm.field.maxlength}} ng-minlength={{vm.field.minlength}} ng-pattern=vm.field.pattern validate-on={{vm.field.validateOn}} validator={{vm.field.validator}} invalid-message={{vm.field.validator}} class=form-control ufield-disabled={{vm.field.disabled}} ng-attr-placeholder={{vm.field.placeholder}} ng-style=vm.field.style ng-change=\"$emit(\\'change\\', { field: vm.field })\" ng-blur=\"$emit(\\'blur\\', { field: vm.field })\">');\n$templateCache.put('up-textarea.html','<textarea id={{vm.field.name}} name={{vm.field.name}} ng-model=vm.form.result[vm.field.name] ng-required=vm.field.required required-message=\"\\'{{vm.field.requiredMsg}}\\'\" ng-maxlength={{vm.field.maxlength}} ng-minlength={{vm.field.minlength}} ng-pattern=vm.field.pattern validate-on={{vm.field.validateOn}} validator={{vm.field.validator}} invalid-message={{vm.field.validator}} class=form-control ufield-disabled={{vm.field.disabled}} ng-attr-placeholder={{vm.field.placeholder}} ng-style=vm.field.style>\\n</textarea>');\n$templateCache.put('up-time.html','<div><div class=timepicker timepicker=\"\" ng-model=vm.form.result[vm.field.name]></div></div>');}]);",null,null],"sourceRoot":"/source/"}