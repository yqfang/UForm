<!DOCTYPE html>
<html ng-app="myApp">
<head>
	<title>angular-data-driven-form</title>
	<link href="//cdn.bootcss.com/bootstrap/3.1.1/css/bootstrap.css" rel="stylesheet">
</head>
<body>
<div style="width: 1600px;padding: 45px 15px;background: #EEE">
	<form u-form-group
		 name="grouped"
		 ng-controller="parentController as vm"
		 fields="vm.fields"
		 result="vm.result"
		 ng-submit="vm.submit(grouped.$valid, vm.result)">
		 <div u-form
			  ng-form	  
		      ng-controller="child1Controller as vm"
		      ng-class="vm.option.formClass"			           
			  fields="vm.fields"
			  option="vm.option"
			  btn-handler="vm.click(field)"
			  result="vm.result"></div>
		 <div u-form
			  ng-form	  
		      ng-controller="child2Controller as vm"
		      ng-class="vm.option.formClass"			           
			  fields="vm.fields"
			  option="vm.option"
			  result="vm.result"></div>
	</form>
</div>

<!--[if IE 8]>
<script src="lib/json3/json3.js"></script>
<script src="lib/es5/es5-shim.js"></script>
<script src="lib/html5shiv/html5shiv.js"></script>
<![endif]-->
<script type="text/javascript" src="lib/jquery.min.js"></script>
<script type="text/javascript" src="lib/angular.js"></script>
<script type="text/javascript" src="lib/ui-bootstrap.js"></script>
<script type="text/javascript" src="lib/ui-bootstrap-tpls.js"></script>
<script type="text/javascript" src="lib/angular-locale_zh.js"></script>
<script type="text/javascript" src="lib/angular-shims-placeholder.min.js"></script>
<script type="text/javascript" src="upForm.js"></script>
<script>

;(function() {
	angular.module("myApp", ["uForm",'ui.bootstrap'])
		.config(function(datepickerConfig) {
			datepickerConfig.showWeeks = false;
		})
		.controller("parentController", function($scope) {
			this.submit = function(valid, data) {
				if(valid){
					console.log('submitted:', JSON.stringify(data));
				}	
			}
		})
		.controller("child1Controller", function($scope, $http) {
			var vm = this;
			this.fields = [];
			this.option = {};
			$http.get("json/form-horizontal.json").success(function(data) {
				angular.extend(vm.fields, data.fields);
				angular.extend(vm.option, data.option);
			})
			this.click = function(field) {
				vm.result[field.name] = "test";
				console.info(field);
			}
		})
		.controller("child2Controller", function($scope, $http) {
			var vm = this;
			vm.fields = [];
			vm.option = {};
			$http.get("json/form-inline.json").success(function(data) {
				angular.extend(vm.fields, data.fields);
				angular.extend(vm.option, data.option);
			})
			this.click = function(field) {
				vm.result[field.name] = "test";
				console.info(field);
			}
		});

})()

</script>

</body>
</html>